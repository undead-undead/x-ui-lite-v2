# v2.0.2 - Xray-Lite Configuration Compatibility Fix

## ğŸ› Bug Fixes

### Fixed Configuration Format

**Issue**: Nodes created in the panel were timing out and not connectable (TCPing fails).

**Root Cause**: 
The configuration file generated by x-ui-lite was not fully compatible with `xray-lite`'s strict structure requirements:
1. `listen` field was sometimes missing (xray-lite requires it).
2. `sniffing` configuration was in the wrong place (top-level `Inbound` instead of within `InboundSettings`).

**Solution**: 
- Enforced `listen` field presence (default to "0.0.0.0").
- Moved `sniffing` configuration into `settings` object to comply with xray-lite structure.

## ğŸ“¦ Changes

### Backend (v2.0.1 â†’ v2.0.2)

**Modified Files**:
- `backend/src/services/xray_service.rs` - Updated config generation logic
- `backend/Cargo.toml` - Version bump

**Config Transformation**:
*Old (Incompatible)*:
```json
{
  "inbound": [{
    "port": 443,
    "sniffing": {...}  // Ignored by xray-lite
  }]
}
```

*New (Compatible)*:
```json
{
  "inbound": [{
    "port": 443,
    "listen": "0.0.0.0", // Explicitly set
    "settings": {
      "sniffing": {...} // Correct location
    }
  }]
}
```

## ğŸ¯ Testing & Verification

After upgrading to v2.0.2:

1. **Restart Panel**: The new version will automatically regenerate the config file.
2. **Check Config**:
   ```bash
   cat /usr/local/x-ui/data/xray.json
   ```
   Ensure "listen" field exists and "sniffing" is inside "settings".
3. **Test Connection**:
   - Updates your client/Passwall
   - Test connectivity (TCPing/URL Test) - **Should match now!**

## ğŸ”„ Upgrade

```bash
bash <(curl -Ls https://raw.githubusercontent.com/undead-undead/x-ui-lite-v2/main/install.sh)
```
